class PhoneMaskInputRus{constructor(e){this._phoneInputs=document.querySelectorAll(e),this._run()}_run(){this._phoneInputs.forEach((e=>{e.addEventListener("keydown",(e=>this._onPhoneKeyDown(e))),e.addEventListener("input",(e=>this._onPhoneInput(e)),!1),e.addEventListener("paste",(e=>this._onPhonePaste),!1)}))}_inputNumbersValue(e){return e.value.replace(/\D/g,"")}_onPhoneKeyDown(e){let t=e.target.value.replace(/\D/g,"");8==e.keyCode&&1==t.length&&(e.target.value="")}_onPhoneInput(e){let t=e.target,n=this._inputNumbersValue(t),a=t.selectionStart,s="";if(!n)return t.value="";if(t.value.length==a){if(["7","8","9"].indexOf(n[0])>-1){"9"==n[0]&&(n="7"+n);let e="8"==n[0]?"8":"+7";s=t.value=e+" ",n.length>1&&(s+="("+n.substring(1,4)),n.length>=5&&(s+=") "+n.substring(4,7)),n.length>=8&&(s+="-"+n.substring(7,9)),n.length>=10&&(s+="-"+n.substring(9,11))}else s="+"+n.substring(0,16);t.value=s}else e.data&&/\D/g.test(e.data)&&(t.value=n)}_onPhonePaste(e){let t=e.target,n=this._inputNumbersValue(t),a=e.clipboardData||window.clipboardData;if(a){let e=a.getData("Text");if(/\D/g.test(e))return void(t.value=n)}}}